# Research AX - AI/AX 증권사 동향 리서치 웹서비스

## Context

증권사에 적용된 AI와 AX(Agent Transformation) 사례를 수집하고 마크다운 리포트로 정리하는 웹서비스를 구축한다.

**핵심 아키텍처**: 로컬에서 뉴스 수집 + Claude CLI로 분석 → 정적 사이트로 배치 빌드/배포

- Claude API 사용하지 않음 (Claude CLI 직접 활용)
- 뉴스 수집/분석은 로컬 CLI 스크립트로 실행
- 분석 결과를 JSON 데이터로 저장 → Next.js SSG로 정적 사이트 생성 → 배포

**프로젝트**: `/Users/koscom/@work/research_ax/research_ax` (빈 git repo)
**bkit 레벨**: Dynamic (Next.js fullstack)

---

## Phase 0: 프로젝트 초기화

**bkit 커맨드**: `/dynamic init research-ax`

1. bkit `/dynamic init`으로 Next.js + Tailwind 프로젝트 스캐폴딩
2. 추가 의존성 설치:
   ```
   rss-parser, cheerio         # RSS/HTML 파싱
   react-markdown, remark-gfm  # 마크다운 렌더링
   node-cron                   # 로컬 스케줄링
   ```
3. 프로젝트 구조 세팅 (아래 참조)
4. `.gitignore`, `CLAUDE.md`, `README.md` 생성

---

## Phase 1: 뉴스 수집 엔진 (`/pdca plan news-collector`)

### 수집 소스 (RSS + 웹 검색)

**RSS 피드 (Primary)**:
| 소스 | RSS URL |
|------|---------|
| 한국경제 증권 | `http://rss.hankyung.com/stock.xml` |
| 한국경제 IT | `http://rss.hankyung.com/it.xml` |
| 매일경제 증권 | `http://file.mk.co.kr/news/rss/rss_50200011.xml` |
| 파이낸셜뉴스 | `http://www.fnnews.com/rss/fn_realnews_it.xml` |

**웹 검색 (Secondary)**: Google News RSS, Naver News 검색 API 보조 활용

### 키워드 필터링
- Primary: `증권사 AI`, `증권 AX`, `금융 AI`, `AI 트레이딩`, `로보어드바이저`
- Secondary: `RPA`, `챗봇`, `디지털전환`, `퀀트`, `AI 자산관리`
- 증권사명: `삼성증권`, `미래에셋증권`, `NH투자증권`, `KB증권` 등

### 구현 파일
- `scripts/collect.ts` — 수집 오케스트레이터 (CLI 실행용)
- `src/lib/collector/rss-fetcher.ts` — RSS 파싱
- `src/lib/collector/web-search.ts` — 웹 검색 보조
- `src/lib/collector/keyword-matcher.ts` — 키워드 매칭 + 점수화
- `src/lib/config/sources.ts` — 소스/키워드 설정

### 데이터 저장
- `data/articles.json` — 수집된 기사 목록
- `data/collection-log.json` — 수집 이력

---

## Phase 2: Claude CLI 분석 (`/pdca plan news-analyzer`)

Claude CLI(`claude` 명령어)를 이용하여 수집된 기사를 분석:

### 분석 작업
1. **카테고리 자동 분류**: AI 트레이딩 / 로보어드바이저 / 고객서비스 AI / 리스크관리 AI / 내부업무자동화
2. **기사 요약**: 각 기사의 핵심 내용 1-2줄 요약
3. **트렌드 분석**: 주간/월간 동향 요약

### 구현
- `scripts/analyze.ts` — Claude CLI를 child_process로 호출
  ```typescript
  // claude --print 옵션으로 비대화형 실행
  execSync(`echo "${prompt}" | claude --print`, { encoding: 'utf-8' })
  ```
- `src/lib/analyzer/categorizer.ts` — 분류 프롬프트 구성
- `src/lib/analyzer/summarizer.ts` — 요약 프롬프트 구성
- 분석 결과 → `data/analyzed-articles.json`에 저장

---

## Phase 3: 마크다운 리포트 생성 (`/pdca plan report-generator`)

### 리포트 구조
```markdown
# AI/AX 증권사 동향 리포트
## 기간: 2026-02-20 ~ 2026-02-26
## 요약
- 총 수집 기사: N건
- 카테고리별: AI 트레이딩(n), 로보어드바이저(n), ...

## 1. AI 트레이딩
- [기사제목](URL) - 출처 (날짜)
  > 요약 내용

## 2. 로보어드바이저
...
```

### 구현
- `scripts/generate-report.ts` — 리포트 생성 CLI
- `src/lib/report/markdown-builder.ts` — 마크다운 빌더
- 출력: `data/reports/YYYY-MM-DD.md` + `data/reports/index.json`

---

## Phase 4: 웹 대시보드 (Next.js SSG) (`/pdca plan dashboard`)

**정적 사이트 생성(SSG)**: `data/` 폴더의 JSON/MD를 읽어 빌드 시점에 페이지 생성

### 페이지 구성
| 경로 | 설명 |
|------|------|
| `/` | 대시보드 (통계, 최근 뉴스, 카테고리 차트) |
| `/news` | 뉴스 목록 (필터링, 검색) |
| `/reports` | 리포트 목록 |
| `/reports/[id]` | 리포트 상세 (마크다운 뷰어) |

### 핵심 컴포넌트
- `src/components/dashboard/` — StatsCards, RecentNews, CategoryChart
- `src/components/news/` — NewsList, NewsCard, NewsFilter
- `src/components/reports/` — ReportList, ReportViewer, MarkdownRenderer

### 데이터 로딩
```typescript
// Next.js SSG: 빌드 시 data/ 폴더에서 JSON 읽기
export async function generateStaticParams() { ... }
export default async function Page() {
  const articles = JSON.parse(fs.readFileSync('data/analyzed-articles.json'))
  // ...
}
```

---

## Phase 5: 배치 워크플로우 (`/pdca plan batch-workflow`)

### 실행 스크립트
```bash
# scripts/batch.sh — 전체 파이프라인 실행
npm run collect      # Phase 1: 뉴스 수집
npm run analyze      # Phase 2: Claude CLI 분석
npm run report       # Phase 3: 리포트 생성
npm run build        # Phase 4: 정적 사이트 빌드
# (선택) npm run deploy  # GitHub Pages 등에 배포
```

### package.json scripts
```json
{
  "collect": "tsx scripts/collect.ts",
  "analyze": "tsx scripts/analyze.ts",
  "report": "tsx scripts/generate-report.ts",
  "batch": "npm run collect && npm run analyze && npm run report && npm run build",
  "deploy": "gh-pages -d out"
}
```

---

## 프로젝트 구조

```
research_ax/
├── scripts/                    # CLI 실행 스크립트
│   ├── collect.ts              # 뉴스 수집
│   ├── analyze.ts              # Claude CLI 분석
│   ├── generate-report.ts      # 리포트 생성
│   └── batch.sh                # 전체 파이프라인
├── data/                       # 수집/분석 데이터 (git tracked)
│   ├── articles.json           # 수집된 기사
│   ├── analyzed-articles.json  # 분석된 기사
│   ├── collection-log.json     # 수집 이력
│   └── reports/                # 생성된 리포트
│       ├── index.json
│       └── 2026-02-26.md
├── src/
│   ├── app/                    # Next.js App Router
│   │   ├── page.tsx            # 대시보드
│   │   ├── layout.tsx          # 레이아웃
│   │   ├── news/page.tsx       # 뉴스 목록
│   │   └── reports/
│   │       ├── page.tsx        # 리포트 목록
│   │       └── [id]/page.tsx   # 리포트 상세
│   ├── components/
│   │   ├── ui/                 # 기본 UI 컴포넌트
│   │   ├── dashboard/          # 대시보드 컴포넌트
│   │   ├── news/               # 뉴스 컴포넌트
│   │   └── reports/            # 리포트 컴포넌트
│   ├── lib/
│   │   ├── collector/          # 수집 로직
│   │   ├── analyzer/           # 분석 로직 (Claude CLI 호출)
│   │   ├── report/             # 리포트 생성 로직
│   │   └── config/             # 설정 (소스, 키워드)
│   └── types/
│       └── index.ts            # 타입 정의
├── docs/                       # bkit PDCA 문서
├── CLAUDE.md
├── next.config.ts              # output: 'export' (정적)
├── package.json
├── tailwind.config.ts
└── tsconfig.json
```

---

## bkit PDCA 실행 순서

```
/dynamic init research-ax         → Phase 0
/pdca plan news-collector         → Phase 1 Plan
/pdca design news-collector       → Phase 1 Design
/pdca do news-collector           → Phase 1 Implementation
/pdca analyze news-collector      → Phase 1 Check
/pdca plan news-analyzer          → Phase 2 Plan
/pdca do news-analyzer            → Phase 2 Implementation
/pdca plan report-generator       → Phase 3 Plan
/pdca do report-generator         → Phase 3 Implementation
/pdca plan dashboard              → Phase 4 Plan
/pdca design dashboard            → Phase 4 Design
/pdca do dashboard                → Phase 4 Implementation
/pdca plan batch-workflow         → Phase 5 Plan
/pdca do batch-workflow           → Phase 5 Implementation
/pdca report research-ax          → 최종 리포트
```

---

## 검증 방법

1. `npm run collect` → `data/articles.json`에 기사 수집 확인
2. `npm run analyze` → `data/analyzed-articles.json`에 카테고리/요약 추가 확인
3. `npm run report` → `data/reports/YYYY-MM-DD.md` 리포트 생성 확인
4. `npm run dev` → localhost:3000에서 대시보드/뉴스/리포트 페이지 확인
5. `npm run build` → 정적 사이트(`out/`) 빌드 성공 확인
6. `npm run batch` → 전체 파이프라인 일괄 실행 확인
